% Declare wideitemize environment
\newenvironment{wideitemize}{\itemize\addtolength{\itemsep}{10pt}}{\enditemize}


% Backup section begin and end
\newcommand{\backupbegin}{%
   \newcounter{lastframenumber}
   \setcounter{lastframenumber}{\value{framenumber}}
   \section{Backup}
   \setcounter{showProgressBar}{0}
   \setcounter{showSlideNumbers}{0}
}
\newcommand{\backupend}{%
   \addtocounter{lastframenumber}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{lastframenumber}} 
}


% Draw images with a shadow
\usepackage{tikz}
\usetikzlibrary{shadows,calc}
\def\shadowshift{3pt,-3pt}
\def\shadowradius{6pt}
\colorlet{innercolor}{black!60}
\colorlet{outercolor}{gray!05}

\newcommand\drawshadow[1]{%
    \begin{pgfonlayer}{shadow}
      \shade[outercolor,inner color=innercolor,outer color=outercolor]
        ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$)
        circle (\shadowradius);
      \shade[outercolor,inner color=innercolor,outer color=outercolor]
        ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$)
        circle (\shadowradius);
      \shade[outercolor,inner color=innercolor,outer color=outercolor]
        ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$)
        circle (\shadowradius);
      \shade[outercolor,inner color=innercolor,outer color=outercolor]
        ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,-\shadowradius/2)$)
        circle (\shadowradius);
      \shade[top color=innercolor,bottom color=outercolor]
        ($(#1.south west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$)
        rectangle
        ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
      \shade[left color=innercolor,right color=outercolor]
        ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$)
        rectangle
        ($(#1.north east)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
      \shade[bottom color=innercolor,top color=outercolor]
        ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$)
        rectangle
        ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
      \shade[outercolor,right color=innercolor,left color=outercolor]
        ($(#1.south west)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$)
        rectangle
        ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
      \filldraw%
        ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$)
        rectangle
        ($(#1.north east)+(\shadowshift)-(\shadowradius/2,\shadowradius/2)$);
    \end{pgfonlayer}
}
\pgfdeclarelayer{shadow} 
\pgfsetlayers{shadow,main}
\newsavebox\mybox
\newlength\mylen

\newcommand\shadowimage[2][]{%
    \setbox0=\hbox{\includegraphics[#1]{#2}}
    \setlength\mylen{\wd0}
    \ifnum\mylen<\ht0
        \setlength\mylen{\ht0}
    \fi
    \divide \mylen by 120
    \def\shadowshift{\mylen,-\mylen}
    \def\shadowradius{\the\dimexpr\mylen+\mylen+\mylen\relax}
    \begin{tikzpicture}
        \node[anchor=south west,inner sep=0] (image) at (0,0)
          {\includegraphics[#1]{#2}};
        \drawshadow{image}
    \end{tikzpicture}
}
